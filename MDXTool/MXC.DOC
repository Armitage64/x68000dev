                   [  mxdrv2用 MMLコンバータ mxc v1.01  ]

・ 使い方

    mxc [オプション] <MMLファイル>
        -c   コンバート時のステータスメッセージを表示しません。
        -x   オクターブの上下コマンドをX-BASICと同じにします。

　　使用音色番号の表示で'[]'で囲まれた番号は、未定義の音色を示します。


・ MMLリスト

　行の先頭がA〜H,Pの場合、MMLデータであるとみなします。

  ※ 以下、#は数値を表します。
     音長指定で'%'を前に付けると、クロック数の指定になります。（例 : c+%36）
     音長は'^'でつなげて値を加算することができます。（例 : f2^8^192）
     音長は１音あたり256クロックまでです。ただし4分音符は48クロックです。
     vと@v、tと@t、およびqと@qはいずれか１方のみ有効です。

    t#     テンポを設定します。1秒間に演奏される4分音符の数。

    @t#    テンポを設定します。OPMのタイマBの設定値。初期値@t200。

    @#     音色を設定します。範囲@0〜@255。初期値は不定。

    o#     オクターブを設定します。範囲o0〜o8。初期値o4。

    <      オクターブを下げます。

    >      オクターブを上げます。

    l#     音長を設定します。初期値l4。

    a〜g   音符データ。後ろに'+'で半音上がり、'-'で半音下がる。
           後ろに書かれた数値は音長を表す。音長を省略した場合はlコマンドの設定値が使用される。

    n#     音程を数値で指定します。範囲n0〜n95。n0がo0d+、n95がo8d。
           音長を指定する場合は、','で区切ります。

    r      休符。音長は音符データに同じ。

    q#     音符を実際に発声する長さを指定します。範囲q1〜q8。初期値q8。

    @q#    キーオフのタイミングを指定クロック数だけ早めます。

    _音程  音符の直後で指定すると、その音符を発声した後、指定された音程まで連続的に変化する。

    &      前の音と後ろの音をつなげる。音符の直後でのみ有効。

    v#     音量を設定します。範囲v0〜v15。初期値v8。

    @v#    音量を細かく設定します。範囲@v0〜@v127。

    (      音量を下げます。

    )      音量を上げます。

    p#     音を定位を指定します。初期値p3。
             0 : 無出力
             1 : 左出力
             2 : 右出力
             3 : 左右出力

    L      演奏データが終了した場合に、再演奏する位置を指定します。

    D#     音程を指定値だけずらせます。単位は半音の1/64音程。範囲D-32767〜D32767。初期値D0。

    [〜]#  '[]'で囲まれた間を指定回数だけ繰り返します。範囲2〜255。

    /      '[]'の中を演奏中、最後の繰り返しで'/'以降のデータを無視します。

    y#1,#2 OPMのレジスタ#1にデータ#2を書き込みます。

    k#     キーオンを指定クロック数だけ遅らせます。初期値k0。

    w#     OPMのスロット32のノイズ周波数を設定します。数値省略でノイズ解除。範囲w0〜w31。

    S#     指定チャンネルに同期信号を送ります。#は数字（0〜8）またはチャンネル名（A〜H,P）。

    W      同期信号を受け取るまで待ちます。

    MP#1,#2,#3
           音程LFOを設定、開始します。
             #1 : LFO波形（0 = 鋸波, 1 = 矩形波, 2 = 三角波）
             #2 : LFO周期の1/4のクロック数
             #3 : LFO振幅の最大値

    MPOF   音程LFOを停止します。

    MPON   音程LFOを開始します。

    MA#1,#2,#3
           音量LFOを設定、開始します。
             #1 : LFO波形（0 = 鋸波, 1 = 矩形波, 2 = 三角波）
             #2 : LFO周期の1/4のクロック数
             #3 : LFO振幅の最大値

    MAOF   音量LFOを停止します。

    MAON   音量LFOを開始します。

    MD#    LFOの開始をキーオン後、指定クロックだけ遅らせます。範囲MD0〜MD255。
           MD0でキーオンに同期しません。OPMLFOには無効です。

    MH#1,#2,#3,#4,#5,#6
           OPMのLFO機能の設定をします。
             #1 : LFO波形（0 = 鋸波, 1 = 矩形波, 2 = 三角波, 3 = ノイズ）
             #2 : LFRQ
             #3 : PMD
             #4 : AMD
             #5 : PMS
             #6 : AMS
             #7 : キーオンとの同期設定（0 = 非同期, 1 = 同期）

    MHOF   OPMLFOを停止します。

    MHON   OPMLFOを開始します。

    !      データコンバート時に、そのチャンネルの以降のデータを無視します。

    F#     PCMの出力周波数を変更します。初期値F4。
             F0 :  3.9kHz
             F1 :  5.2kHz
             F2 :  7.8kHz
             F3 : 10.4kHz
             F4 : 15.6kHz


・ 音色の定義

　行の先頭が'@'の場合、音色定義とみなします。

@1 = {
/*  AR  DR  SR  RR  SL  OL  KS  ML DT1 DT2 AME
    28,  4,  0,  5,  1, 37,  2,  1,  7,  0,  0,
    22,  9,  1,  2,  1, 47,  2, 12,  0,  0,  0,
    29,  4,  3,  6,  1, 37,  1,  3,  3,  0,  0,
    15,  7,  0,  5, 10,  0,  2,  1,  0,  0,  1,
/*  CON FL  OP
     2,  7, 15
}

　　音色はテキストの任意の位置で定義可能です。


・ 補助機能

　行の先頭が'#'の場合、補助機能とみなします。

　#title "タイトル"     MDXデータのタイトルを定義します。

　#pcmfile "pcmdata"    使用するPDXファイルのファイル名を定義します。


☆ このプログラムはフリーウェアです。配布はご自由にどうぞ。

